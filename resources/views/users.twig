{% extends 'templates/app.twig' %}

{% block title %}Community{% endblock %}

{% block content %}
	<div class="row">
		<div class="col-md-12">
			<h1>Community</h1>
		</div>
	</div>

	<div class="row">
		<div class="col-md-4">
			<p>
				This is a list of every account on the website.
			</p>
		</div>
		<div class="col-md-8">
			{% if page.users %}
				<table class="table table-striped table-bordered table-hover">
					<tbody>
						{% for user in page.users %}
							<tr>
								<td>
									<a href="{{ path_for('user.profile', {'id': user.id}) }}">{{ user.name ? user.name : user.username }}</a>
									{% if user.name %}({{ user.username }}){% endif %}

									{% if user.isAdmin() %}
										<span class="label label-danger">Administrator</span>
									{% elseif user.isModerator() %}
										<span class="label label-warning">Moderator</span>
									{% endif %}
								</td>
								{% if auth.user.isAdmin() %}
									<td>
										<a href="{{ path_for('user.profile.delete', {'id': user.id}) }}" class="btn btn-danger btn-xs">Delete</a>
									</td>
								{% endif %}
							</tr>
						{% endfor %}
					</tbody>
				</table>

				{% if page.last != 1 %}
					<nav aria-label="Page navigation">
						<ul class="pagination">
							<li{% if page.current == 1 %} class="disabled"{% endif %}>
								<a href="{{ path_for('community') }}?page=1">
									<span aria-hidden="true"><span class="fa fa-angle-double-left"></span></span>
									<span class="sr-only">First</span>
								</a>
							</li>
							<li{% if page.current == 1 %} class="disabled"{% endif %}>
								<a href="{{ path_for('community') }}?page={{ page.current - 1 }}">
									<span aria-hidden="true"><span class="fa fa-angle-left"></span></span>
									<span class="sr-only">Previous</span>
								</a>
							</li>
							{% if page.current < 6 %}
								{% for p in 1..(page.last < 6 ? page.last : 6) %}
									<li{% if p == page.current %} class="active"{% endif %}><a href="{{ path_for('community') }}?page={{ p }}">{{ p }}</a></li>
								{% endfor %}
								{% if page.last > 6 %}
									<li><span>...</span></li>
								{% endif %}
								{% elseif page.current > (page.last - 6) %}
									{% if page.last - 6 > 0 %}<li><span>...</span></li>{% endif %}
									{% for p in (page.last - 6 > 0 ? page.last - 6 : 1)..page.last %}
										<li{% if p == page.current %} class="active"{% endif %}><a href="{{ path_for('community') }}?page={{ p }}">{{ p }}</a></li>
									{% endfor %}
							{% else %}
								<li><span>...</span></li>
								{% for p in page.current - 3..page.current + 3 %}
									<li{% if p == page.current %} class="active"{% endif %}><a href="{{ path_for('community') }}?page={{ p }}">{{ p }}</a></li>
								{% endfor %}
								<li><span>...</span></li>
							{% endif %}
							<li{% if page.current == page.last %} class="disabled"{% endif %}>
								<a href="{{ path_for('community') }}?page={{ page.current + 1 }}">
									<span aria-hidden="true"><span class="fa fa-angle-right"></span></span>
									<span class="sr-only">Next</span>
								</a>
							</li>
							<li{% if page.current == page.last %} class="disabled"{% endif %}>
								<a href="{{ path_for('community') }}?page={{ page.last }}">
									<span aria-hidden="true"><span class="fa fa-angle-double-right"></span></span>
									<span class="sr-only">Last</span>
								</a>
							</li>
						</ul>
					</nav>
				{% endif %}
			{% else %}
				<p>
					No one has an account! D:
				</p>
			{% endif %}
		</div>
	</div>
{% endblock %}
